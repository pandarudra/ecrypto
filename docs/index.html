<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ECRYPTO • How It Works</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;500;600;700&family=Sora:wght@400;500;600&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <div class="shell">
      <section class="hero">
        <div class="hero-content">
          <span class="tag">HOW IT WORKS</span>
          <h1 class="hero-title">
            ECRYPTO — Secure Folder Encryption, Explained Simply
          </h1>
          <p class="hero-sub">
            ECRYPTO turns any folder into a tamper-evident, fully encrypted
            container. This page explains the pipeline, security model, and
            knobs you can tune.
          </p>
          <div class="cta-row">
            <a
              class="btn primary"
              href="https://github.com/pandarudra/ecrypto/releases/latest"
              >⬇ Download Latest</a
            >
            <a class="btn" href="https://github.com/pandarudra/ecrypto"
              >View on GitHub</a
            >
            <a class="btn" href="../README.md">Back to README</a>
          </div>
        </div>
      </section>

      <section>
        <h2 class="section-title">Flow at a Glance</h2>
        <p class="section-lead">
          Argon2id is used only when you provide a passphrase. Key files skip
          derivation for speed and maximal entropy.
        </p>

        <div class="flow">
          <div class="panel step">
            <strong>1) Input</strong>Folder scanned; paths and metadata
            captured.
          </div>
          <div class="panel step">
            <strong>2) Compress</strong>Zipped into one compressed stream.
          </div>
          <div class="panel step">
            <strong>3) Key</strong>Passphrase → Argon2id or raw key file.
          </div>
          <div class="panel step">
            <strong>4) Encrypt</strong>XChaCha20-Poly1305 encrypts +
            authenticates.
          </div>
          <div class="panel step">
            <strong>5) Output</strong>Emits a single
            <code>.ecrypt</code> container with MAC.
          </div>
        </div>

        <div class="badges">
          <span class="badge">Cipher: XChaCha20-Poly1305</span>
          <span class="badge">KDF: Argon2id (256MB, t=3)</span>
          <span class="badge">Integrity: Poly1305 tag</span>
          <span class="badge">Nonce: 24 bytes</span>
        </div>
      </section>

      <section>
        <h2 class="section-title">Encryption Pipeline</h2>
        <p class="section-lead">When you run <code>ecrypto encrypt</code>:</p>

        <div class="grid">
          <div class="panel">
            <h3>1) Keying</h3>
            <p>
              Passphrase → Argon2id (m=256MB, t=3, p=1) → 256-bit key. Key files
              bypass derivation.
            </p>
            <ul class="list-compact">
              <li>Salt: 16 bytes</li>
              <li>Nonce: 24 bytes</li>
            </ul>
          </div>
          <div class="panel">
            <h3>2) Pack</h3>
            <p>
              Folder packed as ZIP. Filenames & structure remain private inside
              ciphertext.
            </p>
          </div>
          <div class="panel">
            <h3>3) Seal</h3>
            <p>
              XChaCha20-Poly1305 encrypts + authenticates (header + ciphertext).
            </p>
          </div>
          <div class="panel">
            <h3>4) Emit</h3>
            <p>
              Header + encrypted ZIP + MAC become a single
              <code>.ecrypt</code> file.
            </p>
          </div>
        </div>
      </section>

      <section>
        <h2 class="section-title">Decryption Pipeline</h2>
        <p class="section-lead">When you run <code>ecrypto decrypt</code>:</p>

        <div class="grid">
          <div class="panel">
            <h3>1) Parse Header</h3>
            <p>Read magic/version, KDF params, salt, and nonce.</p>
          </div>
          <div class="panel">
            <h3>2) Rebuild Key</h3>
            <p>Passphrase → Argon2id or load raw key file.</p>
          </div>
          <div class="panel">
            <h3>3) Verify + Decrypt</h3>
            <p>Poly1305 tag verifies integrity; ZIP stream recovered.</p>
          </div>
          <div class="panel">
            <h3>4) Restore</h3>
            <p>Folder tree + contents reconstructed.</p>
          </div>
        </div>
      </section>

      <section>
        <h2 class="section-title">Security Model</h2>
        <p class="section-lead">What ECRYPTO protects and what it doesn't.</p>

        <div class="panel">
          <table class="table">
            <thead>
              <tr>
                <th>Protects</th>
                <th>Notes</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>Unauthorized access</td>
                <td>256-bit XChaCha20-Poly1305</td>
              </tr>
              <tr>
                <td>Metadata leakage</td>
                <td>Names inside encrypted ZIP</td>
              </tr>
              <tr>
                <td>Tampering</td>
                <td>Poly1305 MAC</td>
              </tr>
              <tr>
                <td>Brute force</td>
                <td>Argon2id slows guessing</td>
              </tr>
            </tbody>
          </table>
          <table class="table table-gap">
            <thead>
              <tr>
                <th>Not protected</th>
                <th>Mitigation</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>Weak passphrases</td>
                <td>Use 16+ chars or key files</td>
              </tr>
              <tr>
                <td>Keyloggers</td>
                <td>Keep OS clean</td>
              </tr>
              <tr>
                <td>Physical RAM capture</td>
                <td>Full-disk encryption</td>
              </tr>
              <tr>
                <td>Key loss</td>
                <td>No recovery; back up keys</td>
              </tr>
            </tbody>
          </table>
        </div>
      </section>

      <section>
        <h2 class="section-title">Performance Tuning</h2>
        <p class="section-lead">
          Argon2id settings influence speed and brute-force cost.
        </p>

        <div class="grid">
          <div class="panel">
            <h3>Faster</h3>
            <pre>
ecrypto encrypt --in folder --out backup.ecrypt --pass "pass" --argon-m 131072 --argon-t 2</pre
            >
            <p class="list-compact">128MB, t=2</p>
          </div>
          <div class="panel">
            <h3>Balanced (default)</h3>
            <pre>
ecrypto encrypt --in folder --out backup.ecrypt --pass "pass" --argon-m 262144 --argon-t 3</pre
            >
            <p class="list-compact">256MB, t=3</p>
          </div>
          <div class="panel">
            <h3>Stronger</h3>
            <pre>
ecrypto encrypt --in folder --out backup.ecrypt --pass "pass" --argon-m 524288 --argon-t 5</pre
            >
            <p class="list-compact">512MB, t=5</p>
          </div>
          <div class="panel">
            <h3>Fastest (key files)</h3>
            <pre>
ecrypto encrypt --in folder --out backup.ecrypt --key-file mykey.txt</pre
            >
            <p class="list-compact">Skips KDF</p>
          </div>
        </div>
      </section>

      <section>
        <h2 class="section-title">File Format Snapshot</h2>
        <p class="section-lead">
          Headers are authenticated. Nothing meaningful in plaintext.
        </p>

        <div class="panel">
          <pre>
.ecrypt (v1)
┌ Header ────────────────────────────────
│ magic: "ECRYPT01"
│ version: 1
│ kdf: 0=raw, 1=argon2id
│ argon2: m, t, p
│ salt: 16 bytes
│ nonce: 24 bytes
└ Encrypted payload (XChaCha20-Poly1305)
  compressed ZIP + auth tag
</pre
          >
        </div>
      </section>

      <section>
        <h2 class="section-title">Quick Commands</h2>
        <p class="section-lead">Minimal usage examples.</p>

        <div class="grid">
          <div class="panel">
            <h3>Encrypt (passphrase)</h3>
            <pre>
ecrypto encrypt --in folder --out backup.ecrypt --pass "StrongPass123!"</pre
            >
          </div>
          <div class="panel">
            <h3>Encrypt (key file)</h3>
            <pre>
ecrypto keygen --out mykey.txt
ecrypto encrypt --in folder --out backup.ecrypt --key-file mykey.txt</pre
            >
          </div>
          <div class="panel">
            <h3>Decrypt</h3>
            <pre>
ecrypto decrypt --in backup.ecrypt --out restored --pass "StrongPass123!"</pre
            >
          </div>
          <div class="panel">
            <h3>Inspect</h3>
            <pre>ecrypto info --file backup.ecrypt</pre>
          </div>
        </div>
      </section>

      <section>
        <h2 class="section-title">Troubleshooting</h2>
        <div class="grid">
          <div class="panel">
            <h3>Auth tag mismatch</h3>
            <p>Wrong key or corrupted file.</p>
          </div>
          <div class="panel">
            <h3>Access denied</h3>
            <p>Output path must be a file.</p>
          </div>
          <div class="panel">
            <h3>Out of memory</h3>
            <p>Lower <code>--argon-m</code>.</p>
          </div>
          <div class="panel">
            <h3>Slow performance</h3>
            <p>Use SSD or key files.</p>
          </div>
        </div>
      </section>

      <footer class="footer">Made with care for privacy • ECRYPTO</footer>
    </div>
  </body>
</html>
